@model IEnumerable<Customer>

@{
    ViewBag.Title = "List Customer";
}

@section head {
    <style>
        /* TODO */
        .table img {
            width: 100px;
            height: 100px;
            border: 1px solid #333;
            object-fit: cover;
            position: absolute;
            top: 50%;
            left: calc(100% + 10px);
            transform: translate(0, -50%);
            display: none;
        }

        .table tr:hover img {
            display: block;
        }




        #myModal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            
        }




        /* The Close Button */
        #closebtn {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
            left:auto;
        }

            #closebtn:hover,
            #closebtn:focus {
                color: #000;
                text-decoration: none;
                cursor: pointer;
            }


        /* Modal Body */
        .modal-body {
            padding: 0px 0px 25px 0px;
        }

        /* Modal Footer */
        .modal-footer {
            padding: 0px 40px;
        }

        /* Modal Content */
        .modal-content {
            position: relative;
            margin: auto;
            padding: 0;
            border: 1px solid #888;
            width: 20%;
            height: 40%;
            background-color: #fefefe;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
        }

    </style>

    <script src="~/Scripts/jquery-3.5.1.min.js"></script>
    <script src="~/Scripts/jquery-3.5.1.min.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>


    <script>
        var TeamDetailPostBackURL = '/Admin/Customrdetail';
        $(function () {
            $(".anchorDetail").click(function () {
                debugger;
                var $buttonClicked = $(this);
                var username = $buttonClicked.attr('data-id');
                $.ajax({
                    type: "GET",
                    url: "/Admin/Customrdetail",
                    data: { "username": username },
                    datatype: "json",
                    success: function (data) {

                        console.log(data);
                        $('#myModalContent').html(data);
                       
                        $('#myModal').show();
                        username = null;

                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
            });
            
        });

        

    </script>

}

<div id='myModal' class='modal fade'>
    <div class="modal-dialog">
       
            <div id='myModalContent'>

            

        </div>
    </div>

</div>





<p style="padding: 0px 0px 0px 50px">@Model.Count() record(s)</p> <!--help to count the record in the database-->
<table class="table" id="detailCus" >
    <tr>
        <th width="100px">Name</th>
        <th width="100px"> Username</th>
        <th width="100px">Phone</th>
        <th width="100px">Gender</th>
        <th width="100px">Email</th>
        <th width="200px"></th>
    </tr>

    @foreach (var c in Model)
    {
        <tr>
            <td>@c.Name</td>
            <td>@c.Username</td>
            <td>@c.PhoneNo</td>
            <td>@(c.Gender == "F" ? "👧🏻  Female" : "👦🏻 Male")</td>
            <td>@c.Email</td>
            <td style="position: relative">
                @*<a href="~/Home/Detail?id=@s.Id">Detail</a>*@
                <a href="javascript:void(0);" class="anchorDetail" data-id="@c.Username" >Detail</a>
                <button data-get="/Admin/CustomerEdit?username=@c.Username">Edit</button>
                <button data-post="/Admin/CustomerDelete?username=@c.Username">Delete</button>
                <img src="~/Photo/@c.PhotoURL" />
            </td>

        </tr>
    }
</table>




